{% extends "shop/base.html" %}
{% load static %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
<div class="mb-8">
    {% if category %}
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800">{{ category.title }}</h2>
        <p class="mt-2 text-gray-500">Лучшие книги в данной категории!</p>
    {% elif query %}
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Товары по запросу "{{ query }}"</h2>
        {% if not products.exists %}
            <p class="mt-2 text-gray-500">По вашему запросу ничего не найдено. Возможно, этого товара просто нет в наличии - в этом случае он не будет отображаться в результатах поиска.</p>
        {% endif %}
    {% else %}
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Новинки</h2>
        <p class="mt-2 text-gray-500">Главные новинки этого месяца!</p>
    {% endif %}
</div>

<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 md:gap-6">
    {% for product in products %}
    <a href="{{ product.get_absolute_url }}" class="group block bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden">
        <!-- Изображение -->
        <div class="aspect-[2/3] overflow-hidden bg-gray-100">
            <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'shop/img/no_image.png' %}{% endif %}" 
                 alt="{{ product.title }}"
                 class="w-full h-full object-cover">
        </div>
        <!-- Информация -->
        <div class="p-3 md:p-4">
            <h3 class="text-sm md:text-base font-semibold text-gray-800 line-clamp-2 transition-colors group-hover:text-orange-400">{{ product.title }}</h3>
            <p class="mt-1 text-xs md:text-sm text-gray-500 line-clamp-1">{{ product.author }}</p>
            <p class="mt-2 text-base md:text-lg font-bold text-darly-accent">{{ product.price }} RUB</p>
        </div>
    </a>
    {% empty %}
    <div class="col-span-full text-center py-12">
        <p class="text-gray-500 text-lg">Товары не найдены</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
